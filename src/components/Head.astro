---
import type { Props } from '@astrojs/starlight/props';
import Default from '@astrojs/starlight/components/Head.astro';

const { isFallback, lang } = Astro.props;

const isDev = import.meta.env.type === 'development' || import.meta.env.type === undefined;

let path = Astro.url.pathname.replace(/^\//, '').replace(/\/$/, '').replace('academy/', 'academy/open-graph/');
if ( path === '' ) {
	path = 'index';
}
const imageSrc = path + '.png';
const canonicalImageSrc = new URL(imageSrc, Astro.site);
---
<Default {...Astro.props}><slot /></Default>
<!-- Start cookieyes banner --> <script id="cookieyes" type="text/javascript" src="https://cdn-cookieyes.com/client_data/6b7233e7aabf8c97984014e6/script.js"></script> <!-- End cookieyes banner -->
<meta property="og:image" content={canonicalImageSrc} />
<link rel="sitemap" href="/academy/sitemap-index.xml" />
<meta name="google-site-verification" content="EUHJIOL0FDdVtcpY92rKZaoq8IEPafmsafa5oBnrzHs" />

{!isDev && <meta name="google-site-verification" content="EUHJIOL0FDdVtcpY92rKZaoq8IEPafmsafa5oBnrzHs" />}
{isDev && <meta name="robots" content="noindex" />}

{!isDev && 
<script async src="https://www.googletagmanager.com/gtag/js?id=G-V3Z4NFMXH9"></script>
<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'G-V3Z4NFMXH9');
</script>
}

<script>
import '/src/libs/glightbox/js/glightbox.min.js';
import '/src/libs/glightbox/css/glightbox.min.css';
window.addEventListener("load", function(){
	const nolb = document.querySelectorAll(".nolb img");
	nolb.forEach((img) => {
		img.classList.add('nolb');
	});

	const lightbox = GLightbox({
		touchNavigation: true,
		loop: true,
		autoplayVideos: true,
		selector: '.sl-markdown-content img:not(.nolb)',
	});
});
</script>

<script>
	window.onload = function() {
    var links = document.getElementsByTagName('a');
    for (var i = 0; i < links.length; i++) {
        if (links[i].hostname !== window.location.hostname) {
            links[i].target = '_blank';
        }
    }
};
</script>
